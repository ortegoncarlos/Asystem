<!DOCTYPE html> 
<html>
<head>
<meta charset="UTF-8">
<title>American System Services</title>
<link href="jquery-mobile/jquery.mobile.theme-1.0.min.css" rel="stylesheet" type="text/css"/>
<link href="jquery-mobile/jquery.mobile.structure-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="jquery-mobile/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile-1.0.min.js" type="text/javascript"></script>

<link rel="stylesheet" type="text/css" href="style.css">
</head> 
<body> 

<div data-role="page" id="page">
	<div data-role="header">
		<h1>Page One</h1>
	</div>
	<div data-role="content">	
		<ul data-role="listview">
			<li><a href="#page2">Videos</a></li>
            <li><a href="#page3">Services</a></li>
			<li><a href="geo.html" rel="external">Centros de atencion</a></li>
		</ul>		
	</div>
	<div id="footer" data-role="footer">
		<h4>App de Americans System Services</h4>
	</div>
</div>

<div data-role="page" id="page2">
	<div data-role="header">
    <a href="#page" data-role="button" data-icon="home">Inicio</a>
		<h1>Videos</h1>
	</div>
	<div data-role="content">	
		<form id="formulario" >
      
      			<label> Usuario </label>
      			<input type="text" id="nombredeusuario" name="nombredeusuario">
      
      			<label> Password </label>
     			<input type="password" id="clave" name="clave" >
 
      			<input type="submit" value="Login" id="botonLogin">
      
    		</form>		
	</div>
	<div data-role="footer">
		<h4>App de Americans System Services</h4>
	</div>
</div>

<div data-role="page" id="videos">
 
	<div  data-role="header">
    <a href="#page" data-role="button" data-icon="home">Inicio</a>
		<h1>Bienvenido</h1>
	</div>
 
	<div data-role="content">	
		<h2> Bienvenido a los videos </h2>
        
        <a href="http://edamericansystem.net/app/b1.html" rel="external" data-role="button" data-icon="home">Inicio</a>
                
	</div>
	<div data-role="footer">
		<h4>App de Americans System Services</h4>
	</div>
</div>

<script>
 
$('#formulario').submit(function() { 
	
	 
	// recolecta los valores que inserto el usuario
	var datosUsuario = $("#nombredeusuario").val()
	var datosPassword = $("#clave").val()
	
  	archivoValidacion = "http://edamericansystem.net/app/loginapp.php?jsoncallback=?"
 
	$.getJSON( archivoValidacion, { usuario:datosUsuario ,password:datosPassword})
	.done(function(respuestaServer) {
		
		//alert(respuestaServer.mensaje + "\nGenerado en: " + respuestaServer.hora + "\n" +respuestaServer.generador)
		
		if(respuestaServer.validacion == "ok"){
		  
		 	/// si la validacion es correcta, muestra la pantalla "home"
			$.mobile.changePage("#videos")
		  
		}else{
		  
		  /// ejecutar una conducta cuando la validacion falla
		}
  
	})
	return false;
})
	
</script>
 

<div data-role="page" id="page3">
	<div  data-role="header">
    <a href="#page" data-role="button" data-icon="home">Inicio</a>
		<h1>Services</h1>
	</div>
	<div style="" data-role="">	
		<iframe id=iframex src="http://181.48.114.35/academics_info/auth/login?targetUri=%2Fmenu%2Fbeneficiario" width="100%" height="100%" ></iframe>	
	</div>
    
    <script type="text/javascript">
    
 window.onload = function altoscroller() {
 var h = window.innerHeight;
document.getElementById('iframex').style.height= h +"px";
}

window.onresize = function(){
  var h = window.innerHeight;
  var w = window.innerWidth;
   document.getElementById('iframex').style.width= w +"px";
document.getElementById('iframex').style.height= h +"px";

   
       }
    </script>
	
</div>

<div data-role="page" id="page4">
	<div data-role="header">
    <a href="#page" data-role="button" data-icon="home">Inicio</a>
		<h1>Centros de atencion</h1>
	</div>
	<div data-role="content">	
		<script>
		
		document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap esta listo

function onDeviceReady() {
        navigator.geolocation.getCurrentPosition(onSuccess, onError);
    }

    // onSuccess Geolocation
    //
    function onSuccess(position) {
        var element = document.getElementById('geolocation');
        element.innerHTML = 'Latitud: '           + position.coords.latitude              + '<br />' +
          'Longitud: '        + position.coords.longitude         + '\n' +
          'Altitud: '         + position.coords.altitude          + '\n' +
          'Precisión: '       + position.coords.accuracy          + '\n' +
          'Precisión altitud' + position.coords.altitudeAccuracy  + '\n' +
          'Dirección: '       + position.coords.heading           + '\n' +
          'Velocidad: '       + position.coords.speed             + '\n';
    }

var lat1 = 41.3879169;
var lon1 = 2.1699187;
var lat2 = 40.4167413;
var lon2 = -3.7032498;

Distancia = Dist(lat1, lon1, lat2, lon2);   //Retorna numero en Km

function Dist(lat1, lon1, lat2, lon2)
  {
  rad = function(x) {return x*Math.PI/180;}

  var R     = 6378.137;                          //Radio de la tierra en km
  var dLat  = rad( lat2 - lat1 );
  var dLong = rad( lon2 - lon1 );

  var a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(rad(lat1)) * Math.cos(rad(lat2)) * Math.sin(dLong/2) * Math.sin(dLong/2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  var d = R * c;

  return d.toFixed(3);                      //Retorna tres decimales
}

document.write(Distancia);

</script>	

	</div>
	<div data-role="footer">
		<h4>App de Americans System Services</h4>
	</div>
</div>

</body>
</html>